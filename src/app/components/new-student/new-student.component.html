<!-- <p>new-student works!</p>
<button (click)="studentServ.addStudent()">aggiungi utente</button> -->

<form [formGroup]="myForm" (ngSubmit)="submitForm()">

    <label for="name">Nome:</label>
    <input formControlName="name" type="text" id="name">
    <div class="error" *ngIf="myForm.get('name')?.invalid && (myForm.get('name')?.touched || myForm.get('name')?.dirty)">
        <span *ngIf="myForm.get('name')?.errors?.['required']">Il nome è obbligatorio.</span>
        <span *ngIf="myForm.get('name')?.errors?.['minlength']">Il nome deve avere almeno 3 caratteri.</span>
      </div>

    <label for="surname">Cognome:</label>
    <input type="text" id="surname" formControlName="surname">
    <div class="error" *ngIf="myForm.get('name')?.invalid && (myForm.get('name')?.touched || myForm.get('name')?.dirty)">
        <span *ngIf="myForm.get('name')?.errors?.['required']">Il cognome è obbligatorio.</span>
        <span *ngIf="myForm.get('name')?.errors?.['minlength']">Il cognome deve avere almeno 3 caratteri.</span>
      </div>

    <label for="dob">Data di Nascita:</label>
    <input   [min]="minDate" [max]="maxDate" type="date" name="dob" id="dob" formControlName="dob">

    <!-- <label for="country">Nazionalità:</label>
    <input type="text" name="country" id="country"> -->

    <label for="country">Nazionalità:</label>
  
    <div *ngIf="isLoading">Caricamento nazioni in corso...</div>
    
    <div *ngIf="error" class="error-message">{{ error }}</div>
    
    <select 
      formControlName="country" 
      id="country" 
      
      required
    >
      <option value="" disabled selected>Seleziona una nazione</option>
      <option 
        *ngFor="let country of countries" 
        [value]="country.cca2"
      >
        {{ country.name.common }}
      </option>
    </select>

    <button [disabled]="!myForm.valid" type="submit">Invia</button> 
</form>